import{_ as j,a as C,u as M,r as h,k as z,o as B,c as o,b as e,J as R,L as S,j as w,t as l,n as k,F as v,p as g,Q as _,g as T,N as U,i as n}from"./index-367fd436.js";const D={class:"min-h-screen bg-gray-50 py-8"},L={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},N={class:"flex items-center justify-between mb-8"},F={class:"flex space-x-3"},P=["disabled"],V={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},E={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},H={class:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8"},$={class:"bg-white rounded-lg shadow-sm p-3 sm:p-6 border border-gray-200"},I={class:"flex items-center"},q={class:"ml-2 sm:ml-4"},O={class:"text-lg sm:text-2xl font-bold text-gray-900"},J={class:"text-xs sm:text-sm text-gray-500"},Q={class:"bg-white rounded-lg shadow-sm p-6 border border-gray-200"},G={class:"flex items-center"},K={class:"ml-4"},W={class:"text-2xl font-bold text-gray-900"},X={class:"text-sm text-gray-500"},Y={class:"bg-white rounded-lg shadow-sm p-6 border border-gray-200"},Z={class:"flex items-center"},ee={class:"ml-4"},se={class:"text-2xl font-bold text-gray-900"},te={class:"text-sm text-gray-500"},oe={class:"bg-white rounded-lg shadow-sm p-6 border border-gray-200"},le={class:"flex items-center"},ne={class:"ml-4"},re={class:"text-2xl font-bold text-gray-900"},ae={class:"text-sm text-gray-500"},ie={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},de={class:"bg-white rounded-lg shadow-sm p-6 border border-gray-200"},ce={key:0,class:"flex justify-center py-8"},ue={key:1,class:"space-y-3"},me={class:"text-sm text-gray-600"},ve={class:"flex items-center space-x-2"},ge={class:"w-32 bg-gray-200 rounded-full h-2"},_e={class:"text-sm font-medium text-gray-900 w-8 text-right"},xe={key:2,class:"text-center py-8 text-gray-500"},he={class:"bg-white rounded-lg shadow-sm p-6 border border-gray-200"},pe={key:0,class:"flex justify-center py-8"},ye={key:1,class:"space-y-4"},fe={class:"flex items-center justify-between"},be={class:"flex items-center space-x-2"},we={class:"w-24 bg-gray-200 rounded-full h-2"},ke={class:"text-sm font-medium text-gray-900 w-8 text-right"},Ae={class:"flex items-center justify-between"},je={class:"flex items-center space-x-2"},Ce={class:"w-24 bg-gray-200 rounded-full h-2"},Me={class:"text-sm font-medium text-gray-900 w-8 text-right"},ze={class:"flex items-center justify-between"},Be={class:"text-lg font-bold text-gray-900"},Re={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Se={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Te={class:"p-6"},Ue={key:0,class:"flex justify-center py-8"},De={key:1,class:"space-y-4"},Le={class:"flex-shrink-0"},Ne={class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},Fe={class:"text-sm font-medium text-blue-600"},Pe={class:"flex-1 min-w-0"},Ve={class:"text-sm font-medium text-gray-900 truncate"},Ee={class:"text-sm text-gray-500 truncate"},He={class:"flex-shrink-0"},$e={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},Ie={key:2,class:"text-center py-8 text-gray-500"},qe={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Oe={class:"p-6"},Je={key:0,class:"flex justify-center py-8"},Qe={key:1,class:"space-y-4"},Ge={class:"flex items-start justify-between"},Ke={class:"flex-1"},We={class:"text-sm font-medium text-gray-900"},Xe={class:"text-sm text-gray-500 mt-1"},Ye={class:"flex items-center space-x-4 mt-2 text-xs text-gray-500"},Ze={class:"capitalize"},es={key:2,class:"text-center py-8 text-gray-500"},ss={class:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200"},ts={class:"p-6"},os={key:0,class:"flex justify-center py-8"},ls={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ns={class:"flex items-center justify-between"},rs={class:"text-sm font-medium text-gray-900"},as={class:"text-lg font-bold text-blue-600"},is={class:"mt-2 bg-gray-200 rounded-full h-2"},ds={key:2,class:"text-center py-8 text-gray-500"},cs={__name:"AdminAnalytics",setup(us){const A=T(),c=C(),u=M(),i=h(!1),p=h(30),t=h({total_users:0,total_courses:0,total_enrollments:0,total_revenue:0,approved_courses:0,pending_courses:0,new_users_this_month:0,new_enrollments_this_month:0,revenue_this_month:0,user_growth:0,revenue_growth:0,enrollment_trend:[],category_distribution:[],recent_users:[],recent_courses:[]}),y=z(()=>u.isAuthenticated&&u.isAdmin),f=async()=>{var x,s,m;if(!y.value){console.log("âŒ User does not have admin access"),c.error("Access denied. Admin privileges required.");return}i.value=!0;try{console.log("ðŸš€ Fetching analytics overview data...");const a=await U.getOverviewReport();if(console.log("âœ… Analytics overview response:",a),a.data.status==="success"&&a.data.data)t.value=a.data.data,console.log("âœ… Analytics overview data loaded successfully");else throw new Error(a.data.message||"Invalid response format")}catch(a){console.error("âŒ Error fetching analytics overview:",a),((x=a.response)==null?void 0:x.status)>=400&&(((s=a.response)==null?void 0:s.status)===401?c.error("Authentication required. Please log in again."):((m=a.response)==null?void 0:m.status)===403?c.error("Access denied. Please check your admin privileges."):c.error("Failed to load analytics data: "+(a.message||"Unknown error")))}finally{i.value=!1}},b=async()=>{await f()};return B(async()=>{console.log("ðŸš€ AdminAnalytics component mounted"),console.log("ðŸ” Auth state:",{isAuthenticated:u.isAuthenticated,isAdmin:u.isAdmin,userRole:u.userRole}),y.value?await f():(console.log("âŒ User does not have admin access"),c.error("Access denied. Admin privileges required."),A.push("/"))}),(x,s)=>{var m,a;return n(),o("div",D,[e("div",L,[e("div",N,[s[5]||(s[5]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Analytics Dashboard"),e("p",{class:"text-gray-600 mt-1"},"Platform performance insights and statistics")],-1)),e("div",F,[R(e("select",{"onUpdate:modelValue":s[0]||(s[0]=r=>p.value=r),onChange:b,class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},s[1]||(s[1]=[e("option",{value:"30"},"Last 30 days",-1),e("option",{value:"60"},"Last 60 days",-1),e("option",{value:"90"},"Last 90 days",-1)]),544),[[S,p.value]]),e("button",{onClick:b,disabled:i.value,class:"btn btn-primary flex items-center"},[i.value?(n(),o("svg",V,s[2]||(s[2]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3.938l3-2.647z"},null,-1)]))):(n(),o("svg",E,s[3]||(s[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))),s[4]||(s[4]=w(" Refresh ",-1))],8,P)])]),e("div",H,[e("div",$,[e("div",I,[s[8]||(s[8]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])])],-1)),e("div",q,[s[7]||(s[7]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-600"},"Total Users",-1)),e("p",O,l(t.value.total_users||0),1),e("p",J,[e("span",{class:k(t.value.user_growth>=0?"text-green-600":"text-red-600")},l(t.value.user_growth>=0?"+":"")+l(((m=t.value.user_growth)==null?void 0:m.toFixed(1))||0)+"% ",3),s[6]||(s[6]=e("span",{class:"hidden sm:inline"},"from last month",-1))])])])]),e("div",Q,[e("div",G,[s[10]||(s[10]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])])],-1)),e("div",K,[s[9]||(s[9]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Courses",-1)),e("p",W,l(t.value.total_courses||0),1),e("p",X,l(t.value.approved_courses||0)+" approved",1)])])]),e("div",Y,[e("div",Z,[s[12]||(s[12]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",ee,[s[11]||(s[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Enrollments",-1)),e("p",se,l(t.value.total_enrollments||0),1),e("p",te,l(t.value.new_enrollments_this_month||0)+" this month",1)])])]),e("div",oe,[e("div",le,[s[15]||(s[15]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])])],-1)),e("div",ne,[s[14]||(s[14]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Revenue",-1)),e("p",re,"$"+l((t.value.total_revenue||0).toLocaleString()),1),e("p",ae,[e("span",{class:k(t.value.revenue_growth>=0?"text-green-600":"text-red-600")},l(t.value.revenue_growth>=0?"+":"")+l(((a=t.value.revenue_growth)==null?void 0:a.toFixed(1))||0)+"% ",3),s[13]||(s[13]=w(" from last month ",-1))])])])])]),e("div",ie,[e("div",de,[s[17]||(s[17]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Enrollment Trends (Last 6 Months)",-1)),i.value?(n(),o("div",ce,s[16]||(s[16]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):t.value.enrollment_trend&&t.value.enrollment_trend.length>0?(n(),o("div",ue,[(n(!0),o(v,null,g(t.value.enrollment_trend,r=>(n(),o("div",{key:r.date,class:"flex items-center justify-between"},[e("span",me,l(r.date),1),e("div",ve,[e("div",ge,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:_({width:`${Math.min(r.enrollments/Math.max(...t.value.enrollment_trend.map(d=>d.enrollments))*100,100)}%`})},null,4)]),e("span",_e,l(r.enrollments),1)])]))),128))])):(n(),o("div",xe," No enrollment data available "))]),e("div",he,[s[22]||(s[22]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Course Status Distribution",-1)),i.value?(n(),o("div",pe,s[18]||(s[18]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):(n(),o("div",ye,[e("div",fe,[s[19]||(s[19]=e("span",{class:"text-sm text-gray-600"},"Approved",-1)),e("div",be,[e("div",we,[e("div",{class:"bg-green-600 h-2 rounded-full",style:_({width:`${t.value.approved_courses/Math.max(t.value.total_courses,1)*100}%`})},null,4)]),e("span",ke,l(t.value.approved_courses||0),1)])]),e("div",Ae,[s[20]||(s[20]=e("span",{class:"text-sm text-gray-600"},"Pending",-1)),e("div",je,[e("div",Ce,[e("div",{class:"bg-yellow-600 h-2 rounded-full",style:_({width:`${t.value.pending_courses/Math.max(t.value.total_courses,1)*100}%`})},null,4)]),e("span",Me,l(t.value.pending_courses||0),1)])]),e("div",ze,[s[21]||(s[21]=e("span",{class:"text-sm text-gray-600"},"Total",-1)),e("span",Be,l(t.value.total_courses||0),1)])]))])]),e("div",Re,[e("div",Se,[s[24]||(s[24]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Recent Users")],-1)),e("div",Te,[i.value?(n(),o("div",Ue,s[23]||(s[23]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):t.value.recent_users&&t.value.recent_users.length>0?(n(),o("div",De,[(n(!0),o(v,null,g(t.value.recent_users,r=>(n(),o("div",{key:r.id,class:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50"},[e("div",Le,[e("div",Ne,[e("span",Fe,l(r.name.charAt(0).toUpperCase()),1)])]),e("div",Pe,[e("p",Ve,l(r.name),1),e("p",Ee,l(r.email),1)]),e("div",He,[e("span",$e,l(r.status||"active"),1)])]))),128))])):(n(),o("div",Ie," No recent users "))])]),e("div",qe,[s[26]||(s[26]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Recent Courses")],-1)),e("div",Oe,[i.value?(n(),o("div",Je,s[25]||(s[25]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):t.value.recent_courses&&t.value.recent_courses.length>0?(n(),o("div",Qe,[(n(!0),o(v,null,g(t.value.recent_courses,r=>{var d;return n(),o("div",{key:r.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50"},[e("div",Ge,[e("div",Ke,[e("h4",We,l(r.title),1),e("p",Xe," by "+l(((d=r.instructor)==null?void 0:d.name)||"Unknown Instructor"),1),e("div",Ye,[e("span",null,l(r.enrollments_count||0)+" enrollments",1),e("span",Ze,l(r.status),1)])])])])}),128))])):(n(),o("div",es," No recent courses "))])])]),e("div",ss,[s[28]||(s[28]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Course Categories Distribution")],-1)),e("div",ts,[i.value?(n(),o("div",os,s[27]||(s[27]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):t.value.category_distribution&&t.value.category_distribution.length>0?(n(),o("div",ls,[(n(!0),o(v,null,g(t.value.category_distribution,r=>(n(),o("div",{key:r.name,class:"bg-gray-50 rounded-lg p-4"},[e("div",ns,[e("span",rs,l(r.name),1),e("span",as,l(r.value),1)]),e("div",is,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:_({width:`${r.value/Math.max(...t.value.category_distribution.map(d=>d.value))*100}%`})},null,4)])]))),128))])):(n(),o("div",ds," No category data available "))])])])])}}},vs=j(cs,[["__scopeId","data-v-2fb07d66"]]);export{vs as default};
