import{a as T,r as m,G as A,o as L,c as a,b as e,j as V,F as O,p as I,t as i,q as $,J as y,K as v,n as g,d as c,P as q,l as G,S as k,i as l,Q as P}from"./index-367fd436.js";const J={class:"mb-6"},K={key:0,class:"flex justify-center py-12"},Q={key:1,class:"bg-white shadow-sm rounded-lg overflow-hidden"},W={class:"overflow-x-auto"},Y={class:"min-w-full divide-y divide-gray-200"},R={class:"bg-white divide-y divide-gray-200"},X={class:"px-6 py-4 whitespace-nowrap"},Z={class:"flex items-center"},ee={class:"text-sm font-medium text-gray-900"},te={class:"text-sm text-gray-500"},se={class:"px-6 py-4"},oe={class:"text-sm text-gray-900 max-w-xs truncate"},re={class:"px-6 py-4 whitespace-nowrap"},ne={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},ae={class:"px-6 py-4 whitespace-nowrap"},le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ie={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},de={class:"flex items-center justify-end space-x-2"},ce=["onClick"],ue=["onClick"],me={key:2,class:"text-center py-12"},pe={class:"mt-6"},xe={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ye={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},ve={class:"flex items-center justify-between mb-4"},fe={class:"text-lg font-medium text-gray-900"},ge={class:"space-y-4"},be={key:0,class:"mt-1 text-sm text-red-600"},he={key:0,class:"mt-1 text-sm text-red-600"},we={class:"flex items-center space-x-3"},ke={key:0,class:"mt-1 text-sm text-red-600"},_e={key:0,class:"mt-1 text-sm text-red-600"},Ce={key:0,class:"mt-1 text-sm text-red-600"},Me={key:0},je={class:"flex items-center"},Ve={class:"flex space-x-3 mt-6"},Be=["disabled"],Fe={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},De={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ae={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},Ne={class:"mb-6"},Se={class:"text-sm text-gray-600"},Ue={key:0,class:"text-sm text-red-600 mt-2"},ze={class:"flex space-x-3"},Ee=["disabled"],Le={__name:"AdminForumCategories",setup(He){const p=T(),_=m(!1),f=m(!1),C=m([]),b=m(!1),x=m(!1),M=m(!1),u=m(null),j=m(null),s=A({name:"",description:"",color:"#3B82F6",icon:"",sort_order:0,is_active:!0}),n=A({}),h=async()=>{_.value=!0;try{const r=await k.getAll();r.data.status==="success"&&(C.value=r.data.data)}catch(r){console.error("Error fetching categories:",r),p.error("Failed to load categories")}finally{_.value=!1}},N=()=>{s.name="",s.description="",s.color="#3B82F6",s.icon="",s.sort_order=0,s.is_active=!0,Object.keys(n).forEach(r=>delete n[r])},w=()=>{b.value=!1,x.value=!1,N(),j.value=null},S=r=>{j.value=r,s.name=r.name,s.description=r.description||"",s.color=r.color,s.icon=r.icon||"",s.sort_order=r.sort_order,s.is_active=r.is_active,x.value=!0},U=r=>{u.value=r,M.value=!0},B=()=>{M.value=!1,u.value=null},z=async()=>{var r,t;f.value=!0,Object.keys(n).forEach(d=>delete n[d]);try{x.value?(await k.update(j.value.id,s)).data.status==="success"&&(p.success("Category updated successfully"),await h(),w()):(await k.create(s)).data.status==="success"&&(p.success("Category created successfully"),await h(),w())}catch(d){(t=(r=d.response)==null?void 0:r.data)!=null&&t.errors?Object.assign(n,d.response.data.errors):p.error("Failed to save category")}finally{f.value=!1}},E=async()=>{var r,t;if(u.value)try{(await k.delete(u.value.id)).data.status==="success"&&(p.success("Category deleted successfully"),await h(),B())}catch(d){(t=(r=d.response)==null?void 0:r.data)!=null&&t.message?p.error(d.response.data.message):p.error("Failed to delete category")}};return L(()=>{h()}),(r,t)=>{var d,F,D;return l(),a("div",null,[t[26]||(t[26]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Forum Categories"),e("p",{class:"mt-2 text-gray-600"},"Manage forum categories for organizing discussions")],-1)),e("div",J,[e("button",{onClick:t[0]||(t[0]=o=>b.value=!0),class:"btn btn-primary"},t[9]||(t[9]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),V(" Add New Category ",-1)]))]),_.value?(l(),a("div",K,t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"},null,-1)]))):C.value.length>0?(l(),a("div",Q,[e("div",W,[e("table",Y,[t[13]||(t[13]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Category "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Topics "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Sort Order "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",R,[(l(!0),a(O,null,I(C.value,o=>(l(),a("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",X,[e("div",Z,[e("div",{class:"w-4 h-4 rounded-full mr-3",style:P({backgroundColor:o.color})},null,4),e("div",null,[e("div",ee,i(o.name),1),e("div",te,i(o.slug),1)])])]),e("td",se,[e("div",oe,i(o.description||"No description"),1)]),e("td",re,[e("span",ne,i(o.topics_count||0)+" topics ",1)]),e("td",ae,[e("span",{class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},i(o.is_active?"Active":"Inactive"),3)]),e("td",le,i(o.sort_order),1),e("td",ie,[e("div",de,[e("button",{onClick:H=>S(o),class:"text-indigo-600 hover:text-indigo-900",title:"Edit category"},t[11]||(t[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,ce),e("button",{onClick:H=>U(o),class:"text-red-600 hover:text-red-900",title:"Delete category"},t[12]||(t[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ue)])])]))),128))])])])])):(l(),a("div",me,[t[15]||(t[15]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),t[16]||(t[16]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No categories",-1)),t[17]||(t[17]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new forum category.",-1)),e("div",pe,[e("button",{onClick:t[1]||(t[1]=o=>b.value=!0),class:"btn btn-primary"},t[14]||(t[14]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),V(" Add Category ",-1)]))])])),b.value||x.value?(l(),a("div",xe,[e("div",ye,[e("div",ve,[e("h3",fe,i(x.value?"Edit Category":"Create New Category"),1),e("button",{onClick:w,class:"text-gray-400 hover:text-gray-600"},t[18]||(t[18]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:$(z,["prevent"])},[e("div",ge,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Name",-1)),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.name=o),type:"text",required:"",class:g(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",{"border-red-500":n.name}]),placeholder:"Category name"},null,2),[[v,s.name]]),n.name?(l(),a("p",be,i(n.name),1)):c("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),y(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.description=o),rows:"3",class:g(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",{"border-red-500":n.description}]),placeholder:"Category description (optional)"},null,2),[[v,s.description]]),n.description?(l(),a("p",he,i(n.description),1)):c("",!0)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Color",-1)),e("div",we,[y(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.color=o),type:"color",class:"w-12 h-10 border border-gray-300 rounded cursor-pointer"},null,512),[[v,s.color]]),y(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.color=o),type:"text",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"#3B82F6"},null,512),[[v,s.color]])]),n.color?(l(),a("p",ke,i(n.color),1)):c("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Icon",-1)),y(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.icon=o),type:"text",class:g(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",{"border-red-500":n.icon}]),placeholder:"Icon name (optional)"},null,2),[[v,s.icon]]),n.icon?(l(),a("p",_e,i(n.icon),1)):c("",!0)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sort Order",-1)),y(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.sort_order=o),type:"number",min:"0",class:g(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",{"border-red-500":n.sort_order}]),placeholder:"0"},null,2),[[v,s.sort_order,void 0,{number:!0}]]),n.sort_order?(l(),a("p",Ce,i(n.sort_order),1)):c("",!0)]),x.value?(l(),a("div",Me,[e("label",je,[y(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.is_active=o),type:"checkbox",class:"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50"},null,512),[[q,s.is_active]]),t[24]||(t[24]=e("span",{class:"ml-2 text-sm text-gray-700"},"Active",-1))])])):c("",!0)]),e("div",Ve,[e("button",{type:"button",onClick:w,class:"btn btn-secondary flex-1"}," Cancel "),e("button",{type:"submit",disabled:f.value,class:"btn btn-primary flex-1"},[f.value?(l(),a("span",Fe)):c("",!0),V(" "+i(f.value?"Saving...":x.value?"Update":"Create"),1)],8,Be)])],32)])])):c("",!0),M.value?(l(),a("div",De,[e("div",Ae,[t[25]||(t[25]=G('<div class="flex items-center mb-4"><div class="flex-shrink-0"><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div class="ml-3"><h3 class="text-lg font-medium text-gray-900">Delete Category</h3></div></div>',1)),e("div",Ne,[e("p",Se,' Are you sure you want to delete the category "'+i((d=u.value)==null?void 0:d.name)+'"? This action cannot be undone. ',1),((F=u.value)==null?void 0:F.topics_count)>0?(l(),a("p",Ue," Warning: This category has "+i(u.value.topics_count)+" topics. You cannot delete a category with existing topics. ",1)):c("",!0)]),e("div",ze,[e("button",{onClick:B,class:"btn btn-secondary flex-1"},"Cancel"),e("button",{onClick:E,disabled:((D=u.value)==null?void 0:D.topics_count)>0,class:"btn btn-danger flex-1"}," Delete ",8,Ee)])])])):c("",!0)])}}};export{Le as default};
