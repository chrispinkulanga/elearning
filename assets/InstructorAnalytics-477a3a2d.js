import{u as b,r as m,o as k,b as l,d as t,t as o,F as h,p,T as y,m as n}from"./index-47cf8562.js";const R={class:"min-h-screen bg-gray-50 py-8"},C={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},j={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 sm:gap-6 mb-8"},M={class:"bg-white rounded-lg shadow-sm p-3 sm:p-6"},T={class:"flex items-center"},S={class:"ml-2 sm:ml-4"},D={class:"text-lg sm:text-2xl font-bold text-gray-900"},B={class:"bg-white rounded-lg shadow-sm p-3 sm:p-6"},z={class:"flex items-center"},A={class:"ml-2 sm:ml-4"},E={class:"text-lg sm:text-2xl font-bold text-gray-900"},P={class:"bg-white rounded-lg shadow-sm p-3 sm:p-6"},N={class:"flex items-center"},$={class:"ml-2 sm:ml-4"},F={class:"text-lg sm:text-2xl font-bold text-gray-900"},V={class:"bg-white rounded-lg shadow-sm p-3 sm:p-6"},H={class:"flex items-center"},I={class:"ml-2 sm:ml-4"},L={class:"text-lg sm:text-2xl font-bold text-gray-900"},O={class:"bg-white rounded-lg shadow-sm p-3 sm:p-6"},U={class:"flex items-center"},q={class:"ml-2 sm:ml-4"},G={class:"text-lg sm:text-2xl font-bold text-gray-900"},J={class:"bg-white rounded-lg shadow-sm p-3 sm:p-6"},K={class:"flex items-center"},Q={class:"ml-2 sm:ml-4"},W={class:"text-lg sm:text-2xl font-bold text-gray-900"},X={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Y={class:"bg-white rounded-lg shadow-sm"},Z={class:"p-6"},tt={key:0,class:"flex justify-center py-8"},st={key:1,class:"space-y-4"},et={class:"flex-1"},ot={class:"text-sm font-medium text-gray-900"},lt={class:"text-xs text-gray-500"},nt={class:"flex items-center space-x-4 text-sm"},at={class:"text-center"},rt={class:"font-medium text-gray-900"},it={class:"text-center"},dt={class:"font-medium text-gray-900"},mt={class:"text-center"},ct={class:"font-medium text-gray-900"},ut={key:2,class:"text-center py-8"},vt={class:"bg-white rounded-lg shadow-sm"},xt={class:"p-6"},gt={class:"grid grid-cols-2 gap-4"},ht={class:"text-center p-4 bg-gray-50 rounded-lg"},pt={class:"text-2xl font-bold text-gray-900"},yt={class:"text-center p-4 bg-gray-50 rounded-lg"},ft={class:"text-2xl font-bold text-gray-900"},_t={class:"bg-white rounded-lg shadow-sm"},wt={class:"p-6"},bt={key:0,class:"flex justify-center py-8"},kt={key:1,class:"space-y-4"},Rt={class:"text-sm text-gray-600"},Ct={class:"text-sm font-medium text-gray-900"},jt={key:2,class:"text-center py-8"},Mt={class:"bg-white rounded-lg shadow-sm"},Tt={class:"p-6"},St={key:0,class:"flex justify-center py-8"},Dt={key:1,class:"space-y-4"},Bt={class:"flex items-center space-x-3"},zt={class:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center"},At={class:"text-xs font-medium text-primary-600"},Et={class:"text-sm font-medium text-gray-900"},Pt={class:"text-xs text-gray-500"},Nt={class:"text-sm font-medium text-gray-900"},$t={key:2,class:"text-center py-8"},Ht={__name:"InstructorAnalytics",setup(Ft){const f=b(),i=m(!1),a=m({totalCourses:0,totalStudents:0,newStudentsThisMonth:0,totalRevenue:0,monthlyRevenue:0,totalEnrollments:0,completionRate:0,averageRating:0}),c=m([]),u=m([]),v=m([]),_=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric"}),w=async()=>{var d,s;i.value=!0;try{console.log("ðŸ”„ Fetching analytics data...");const[e,x]=await Promise.allSettled([y.getDashboardStats(),y.getAnalytics({period:30})]);if(e.status==="fulfilled"){const r=(((d=e.value.data)==null?void 0:d.data)||e.value.data||{}).stats||{};a.value={totalCourses:r.total_courses||0,totalStudents:r.total_students||0,newStudentsThisMonth:r.new_students_this_month||0,totalRevenue:r.total_revenue||0,monthlyRevenue:r.monthly_revenue||0,totalEnrollments:r.total_enrollments||0,completionRate:r.completion_rate||0,averageRating:r.average_rating||0}}if(x.status==="fulfilled"){const g=x.value.data||{};c.value=g.course_performance||[],u.value=g.enrollment_trends||[],v.value=g.top_courses||[]}console.log("ðŸ“Š Analytics data loaded:",{stats:a.value,coursePerformance:c.value.length,enrollmentTrends:u.value.length,topCourses:v.value.length})}catch(e){console.error("âŒ Error fetching analytics data:",e),((s=e.response)==null?void 0:s.status)>=400&&f.error("Failed to load analytics data")}finally{i.value=!1}};return k(()=>{w()}),(d,s)=>(n(),l("div",R,[t("div",C,[s[27]||(s[27]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900"},"Analytics"),t("p",{class:"mt-2 text-gray-600"},"Detailed performance metrics and insights")],-1)),t("div",j,[t("div",M,[t("div",T,[s[1]||(s[1]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-primary-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])])],-1)),t("div",S,[s[0]||(s[0]=t("p",{class:"text-xs sm:text-sm font-medium text-gray-600"},"Total Courses",-1)),t("p",D,o(a.value.totalCourses),1)])])]),t("div",B,[t("div",z,[s[3]||(s[3]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-green-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])])],-1)),t("div",A,[s[2]||(s[2]=t("p",{class:"text-xs sm:text-sm font-medium text-gray-600"},"Total Students",-1)),t("p",E,o(a.value.totalStudents),1)])])]),t("div",P,[t("div",N,[s[5]||(s[5]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])])],-1)),t("div",$,[s[4]||(s[4]=t("p",{class:"text-xs sm:text-sm font-medium text-gray-600"},"New This Month",-1)),t("p",F,o(a.value.newStudentsThisMonth),1)])])]),t("div",V,[t("div",H,[s[7]||(s[7]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-yellow-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])])],-1)),t("div",I,[s[6]||(s[6]=t("p",{class:"text-xs sm:text-sm font-medium text-gray-600"},"Total Revenue",-1)),t("p",L,"$"+o(a.value.totalRevenue),1)])])]),t("div",O,[t("div",U,[s[9]||(s[9]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-purple-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])])],-1)),t("div",q,[s[8]||(s[8]=t("p",{class:"text-xs sm:text-sm font-medium text-gray-600"},"Completion Rate",-1)),t("p",G,o(a.value.completionRate)+"%",1)])])]),t("div",J,[t("div",K,[s[11]||(s[11]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-orange-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})])])],-1)),t("div",Q,[s[10]||(s[10]=t("p",{class:"text-xs sm:text-sm font-medium text-gray-600"},"Avg Rating",-1)),t("p",W,o(a.value.averageRating),1)])])])]),t("div",X,[t("div",Y,[s[17]||(s[17]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Course Performance")],-1)),t("div",Z,[i.value?(n(),l("div",tt,s[12]||(s[12]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)]))):c.value.length>0?(n(),l("div",st,[(n(!0),l(h,null,p(c.value.slice(0,5),e=>(n(),l("div",{key:e.id,class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},[t("div",et,[t("h4",ot,o(e.title),1),t("p",lt,o(e.category),1)]),t("div",nt,[t("div",at,[t("div",rt,o(e.enrollments),1),s[13]||(s[13]=t("div",{class:"text-gray-500"},"Enrollments",-1))]),t("div",it,[t("div",dt,o(e.completion_rate)+"%",1),s[14]||(s[14]=t("div",{class:"text-gray-500"},"Completion",-1))]),t("div",mt,[t("div",ct,"$"+o(e.revenue),1),s[15]||(s[15]=t("div",{class:"text-gray-500"},"Revenue",-1))])])]))),128))])):(n(),l("div",ut,s[16]||(s[16]=[t("p",{class:"text-gray-500"},"No course performance data available",-1)])))])]),t("div",vt,[s[20]||(s[20]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Revenue Overview")],-1)),t("div",xt,[t("div",gt,[t("div",ht,[t("div",pt,"$"+o(a.value.totalRevenue),1),s[18]||(s[18]=t("div",{class:"text-sm text-gray-500"},"Total Revenue",-1))]),t("div",yt,[t("div",ft,"$"+o(a.value.monthlyRevenue),1),s[19]||(s[19]=t("div",{class:"text-sm text-gray-500"},"This Month",-1))])])])]),t("div",_t,[s[23]||(s[23]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Enrollment Trends")],-1)),t("div",wt,[i.value?(n(),l("div",bt,s[21]||(s[21]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)]))):u.value.length>0?(n(),l("div",kt,[(n(!0),l(h,null,p(u.value.slice(0,7),e=>(n(),l("div",{key:e.date,class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},[t("div",Rt,o(_(e.date)),1),t("div",Ct,o(e.count)+" enrollments",1)]))),128))])):(n(),l("div",jt,s[22]||(s[22]=[t("p",{class:"text-gray-500"},"No enrollment trend data available",-1)])))])]),t("div",Mt,[s[26]||(s[26]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Top Performing Courses")],-1)),t("div",Tt,[i.value?(n(),l("div",St,s[24]||(s[24]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)]))):v.value.length>0?(n(),l("div",Dt,[(n(!0),l(h,null,p(v.value,(e,x)=>(n(),l("div",{key:e.id,class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},[t("div",Bt,[t("div",zt,[t("span",At,o(x+1),1)]),t("div",null,[t("h4",Et,o(e.title),1),t("p",Pt,o(e.enrollments)+" enrollments",1)])]),t("div",Nt,"$"+o(e.revenue),1)]))),128))])):(n(),l("div",$t,s[25]||(s[25]=[t("p",{class:"text-gray-500"},"No course data available",-1)])))])])])])]))}};export{Ht as default};
