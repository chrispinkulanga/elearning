import{_ as L,a as F,u as N,r as g,o as R,c as u,b as o,d as z,t as w,e as k,w as S,I as V,J as t,K as r,L as i,F as T,p as G,N as y,h as Y,i as d,j as U}from"./index-367fd436.js";const I={class:"min-h-screen bg-gray-50 py-8"},j={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},H={class:"mb-8"},J={class:"flex items-center justify-between"},q={class:"flex space-x-3"},$=["disabled"],K={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},O={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-6 mb-8 text-center"},W={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6 mb-8 text-center"},Q={key:2},X={key:0,class:"flex justify-center py-12"},Z={key:1,class:"space-y-8"},h={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ee={class:"p-6 space-y-6"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},le={class:"bg-white rounded-lg shadow-sm border border-gray-200"},se={class:"p-6 space-y-6"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re={class:"space-y-2"},ne=["onUpdate:modelValue"],ae=["onClick"],ue={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ie={class:"p-6 space-y-6"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},me={class:"bg-white rounded-lg shadow-sm border border-gray-200"},pe={class:"p-6 space-y-6"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},be={class:"bg-white rounded-lg shadow-sm border border-gray-200"},fe={class:"p-6 space-y-6"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ye={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ve={class:"p-6 space-y-6"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},we={class:"flex space-x-4"},ke=["disabled"],Se=["disabled"],Ue={__name:"AdminSettings",setup(Ce){const a=F(),m=N(),v=g(!1),p=g(!1),b=g(!1),f=g(!1),l=g({general:{platform_name:"",platform_url:"",contact_email:"",support_phone:"",platform_description:""},courses:{auto_approve:!1,max_duration:100,max_file_size:50,allow_free_courses:!0,categories:["Programming","Design","Business","Marketing"]},users:{allow_registration:!0,email_verification:!0,default_role:"student",max_users:1e4},payment:{currency:"USD",platform_commission:10,min_withdrawal:50,gateway:"stripe"},email:{smtp_host:"",smtp_port:587,smtp_username:"",smtp_password:"",from_email:"",from_name:""},maintenance:{maintenance_mode:!1,debug_mode:!1}}),_=async()=>{if(!(!m.isAuthenticated||!m.isAdmin)){v.value=!0;try{const e=(await y.getSettings()).data.data||{};e.general&&(l.value.general={...l.value.general,...e.general}),e.courses&&(l.value.courses={...l.value.courses,...e.courses}),e.users&&(l.value.users={...l.value.users,...e.users}),e.payment&&(l.value.payment={...l.value.payment,...e.payment}),e.email&&(l.value.email={...l.value.email,...e.email}),e.maintenance&&(l.value.maintenance={...l.value.maintenance,...e.maintenance}),console.log("âœ… Settings loaded successfully")}catch(n){console.error("âŒ Error fetching settings:",n),a.error("Failed to load settings")}finally{v.value=!1}}},P=async()=>{if(!(!m.isAuthenticated||!m.isAdmin)){p.value=!0;try{await y.updateSettings(l.value),a.success("Settings saved successfully!"),console.log("âœ… Settings saved successfully")}catch(n){console.error("âŒ Error saving settings:",n),a.error("Failed to save settings")}finally{p.value=!1}}},A=()=>{l.value.courses.categories.push("")},M=n=>{l.value.courses.categories.splice(n,1)},B=async()=>{b.value=!0;try{await y.createBackup(),a.success("System backup created successfully!")}catch(n){console.error("âŒ Error creating backup:",n),a.error("Failed to create backup")}finally{b.value=!1}},D=async()=>{f.value=!0;try{a.success("Cache cleared successfully!")}catch(n){console.error("âŒ Error clearing cache:",n),a.error("Failed to clear cache")}finally{f.value=!1}},E=async()=>{try{const n=await y.getSystemLogs();console.log("System logs:",n.data),a.info("System logs loaded (check console)")}catch(n){console.error("âŒ Error fetching system logs:",n),a.error("Failed to load system logs")}};return R(async()=>{console.log("ðŸš€ AdminSettings component mounted"),m.isAuthenticated&&m.isAdmin&&await _()}),(n,e)=>{const x=Y("router-link");return d(),u("div",I,[o("div",j,[o("div",H,[o("div",J,[e[27]||(e[27]=o("div",null,[o("h1",{class:"text-3xl font-bold text-gray-900"},"System Settings"),o("p",{class:"mt-2 text-gray-600"},"Manage platform configuration and preferences")],-1)),o("div",q,[o("button",{onClick:P,disabled:p.value,class:"btn btn-success flex items-center space-x-2"},[p.value?(d(),u("svg",K,e[25]||(e[25]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):z("",!0),o("span",null,w(p.value?"Saving...":"Save All Settings"),1)],8,$),k(x,{to:"/admin",class:"btn btn-primary"},{default:S(()=>e[26]||(e[26]=[U(" Back to Dashboard ",-1)])),_:1,__:[26]})])])]),V(m).isAuthenticated?V(m).isAdmin?(d(),u("div",Q,[v.value?(d(),u("div",X,e[34]||(e[34]=[o("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):(d(),u("div",Z,[o("div",h,[e[40]||(e[40]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"General Settings"),o("p",{class:"text-sm text-gray-600"},"Basic platform configuration")],-1)),o("div",ee,[o("div",oe,[o("div",null,[e[35]||(e[35]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Platform Name",-1)),t(o("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.general.platform_name=s),type:"text",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"eLearning Platform"},null,512),[[r,l.value.general.platform_name]])]),o("div",null,[e[36]||(e[36]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Platform URL",-1)),t(o("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.general.platform_url=s),type:"url",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"},null,512),[[r,l.value.general.platform_url]])]),o("div",null,[e[37]||(e[37]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Contact Email",-1)),t(o("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.general.contact_email=s),type:"email",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"admin@example.com"},null,512),[[r,l.value.general.contact_email]])]),o("div",null,[e[38]||(e[38]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Support Phone",-1)),t(o("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.general.support_phone=s),type:"tel",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1-555-0123"},null,512),[[r,l.value.general.support_phone]])])]),o("div",null,[e[39]||(e[39]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Platform Description",-1)),t(o("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.general.platform_description=s),rows:"3",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Brief description of your eLearning platform"},null,512),[[r,l.value.general.platform_description]])])])]),o("div",le,[e[48]||(e[48]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Course Settings"),o("p",{class:"text-sm text-gray-600"},"Course creation and management preferences")],-1)),o("div",se,[o("div",te,[o("div",null,[e[42]||(e[42]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Auto-approve Courses",-1)),t(o("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.courses.auto_approve=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[41]||(e[41]=[o("option",{value:"false"},"Manual Approval Required",-1),o("option",{value:"true"},"Auto-approve New Courses",-1)]),512),[[i,l.value.courses.auto_approve]])]),o("div",null,[e[43]||(e[43]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Maximum Course Duration (hours)",-1)),t(o("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.courses.max_duration=s),type:"number",min:"1",max:"1000",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"100"},null,512),[[r,l.value.courses.max_duration]])]),o("div",null,[e[44]||(e[44]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Maximum File Size (MB)",-1)),t(o("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.courses.max_file_size=s),type:"number",min:"1",max:"1000",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"50"},null,512),[[r,l.value.courses.max_file_size]])]),o("div",null,[e[46]||(e[46]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Allow Free Courses",-1)),t(o("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.courses.allow_free_courses=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[45]||(e[45]=[o("option",{value:"true"},"Yes",-1),o("option",{value:"false"},"No",-1)]),512),[[i,l.value.courses.allow_free_courses]])])]),o("div",null,[e[47]||(e[47]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Course Categories",-1)),o("div",re,[(d(!0),u(T,null,G(l.value.courses.categories,(s,c)=>(d(),u("div",{key:c,class:"flex space-x-2"},[t(o("input",{"onUpdate:modelValue":C=>l.value.courses.categories[c]=C,type:"text",class:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Category name"},null,8,ne),[[r,l.value.courses.categories[c]]]),o("button",{onClick:C=>M(c),type:"button",class:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Remove ",8,ae)]))),128)),o("button",{onClick:A,type:"button",class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500"}," Add Category ")])])])]),o("div",ue,[e[56]||(e[56]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"User Settings"),o("p",{class:"text-sm text-gray-600"},"User registration and management preferences")],-1)),o("div",ie,[o("div",de,[o("div",null,[e[50]||(e[50]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Allow User Registration",-1)),t(o("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.users.allow_registration=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[49]||(e[49]=[o("option",{value:"true"},"Yes",-1),o("option",{value:"false"},"No",-1)]),512),[[i,l.value.users.allow_registration]])]),o("div",null,[e[52]||(e[52]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email Verification Required",-1)),t(o("select",{"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.users.email_verification=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[51]||(e[51]=[o("option",{value:"true"},"Yes",-1),o("option",{value:"false"},"No",-1)]),512),[[i,l.value.users.email_verification]])]),o("div",null,[e[54]||(e[54]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default User Role",-1)),t(o("select",{"onUpdate:modelValue":e[11]||(e[11]=s=>l.value.users.default_role=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[53]||(e[53]=[o("option",{value:"student"},"Student",-1),o("option",{value:"instructor"},"Instructor",-1)]),512),[[i,l.value.users.default_role]])]),o("div",null,[e[55]||(e[55]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Maximum Users",-1)),t(o("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>l.value.users.max_users=s),type:"number",min:"1",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"10000"},null,512),[[r,l.value.users.max_users]])])])])]),o("div",me,[e[63]||(e[63]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Payment Settings"),o("p",{class:"text-sm text-gray-600"},"Payment gateway and financial configuration")],-1)),o("div",pe,[o("div",ge,[o("div",null,[e[58]||(e[58]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Currency",-1)),t(o("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>l.value.payment.currency=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[57]||(e[57]=[o("option",{value:"USD"},"USD ($)",-1),o("option",{value:"EUR"},"EUR (â‚¬)",-1),o("option",{value:"GBP"},"GBP (Â£)",-1),o("option",{value:"JPY"},"JPY (Â¥)",-1)]),512),[[i,l.value.payment.currency]])]),o("div",null,[e[59]||(e[59]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Platform Commission (%)",-1)),t(o("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>l.value.payment.platform_commission=s),type:"number",min:"0",max:"100",step:"0.1",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"10"},null,512),[[r,l.value.payment.platform_commission]])]),o("div",null,[e[60]||(e[60]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Minimum Withdrawal Amount",-1)),t(o("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>l.value.payment.min_withdrawal=s),type:"number",min:"0",step:"0.01",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"50.00"},null,512),[[r,l.value.payment.min_withdrawal]])]),o("div",null,[e[62]||(e[62]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payment Gateway",-1)),t(o("select",{"onUpdate:modelValue":e[16]||(e[16]=s=>l.value.payment.gateway=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[61]||(e[61]=[o("option",{value:"stripe"},"Stripe",-1),o("option",{value:"paypal"},"PayPal",-1),o("option",{value:"razorpay"},"Razorpay",-1),o("option",{value:"offline"},"Offline Payment",-1)]),512),[[i,l.value.payment.gateway]])])])])]),o("div",be,[e[70]||(e[70]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Email Settings"),o("p",{class:"text-sm text-gray-600"},"Email configuration and templates")],-1)),o("div",fe,[o("div",ce,[o("div",null,[e[64]||(e[64]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SMTP Host",-1)),t(o("input",{"onUpdate:modelValue":e[17]||(e[17]=s=>l.value.email.smtp_host=s),type:"text",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"smtp.gmail.com"},null,512),[[r,l.value.email.smtp_host]])]),o("div",null,[e[65]||(e[65]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SMTP Port",-1)),t(o("input",{"onUpdate:modelValue":e[18]||(e[18]=s=>l.value.email.smtp_port=s),type:"number",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"587"},null,512),[[r,l.value.email.smtp_port]])]),o("div",null,[e[66]||(e[66]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SMTP Username",-1)),t(o("input",{"onUpdate:modelValue":e[19]||(e[19]=s=>l.value.email.smtp_username=s),type:"text",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your-email@gmail.com"},null,512),[[r,l.value.email.smtp_username]])]),o("div",null,[e[67]||(e[67]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SMTP Password",-1)),t(o("input",{"onUpdate:modelValue":e[20]||(e[20]=s=>l.value.email.smtp_password=s),type:"password",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"},null,512),[[r,l.value.email.smtp_password]])])]),o("div",null,[e[68]||(e[68]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"From Email",-1)),t(o("input",{"onUpdate:modelValue":e[21]||(e[21]=s=>l.value.email.from_email=s),type:"email",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"noreply@example.com"},null,512),[[r,l.value.email.from_email]])]),o("div",null,[e[69]||(e[69]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"From Name",-1)),t(o("input",{"onUpdate:modelValue":e[22]||(e[22]=s=>l.value.email.from_name=s),type:"text",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"eLearning Platform"},null,512),[[r,l.value.email.from_name]])])])]),o("div",ye,[e[75]||(e[75]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"System Maintenance"),o("p",{class:"text-sm text-gray-600"},"System operations and maintenance tools")],-1)),o("div",ve,[o("div",xe,[o("div",null,[e[72]||(e[72]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Maintenance Mode",-1)),t(o("select",{"onUpdate:modelValue":e[23]||(e[23]=s=>l.value.maintenance.maintenance_mode=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[71]||(e[71]=[o("option",{value:"false"},"Disabled",-1),o("option",{value:"true"},"Enabled",-1)]),512),[[i,l.value.maintenance.maintenance_mode]])]),o("div",null,[e[74]||(e[74]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Debug Mode",-1)),t(o("select",{"onUpdate:modelValue":e[24]||(e[24]=s=>l.value.maintenance.debug_mode=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[73]||(e[73]=[o("option",{value:"false"},"Production",-1),o("option",{value:"true"},"Development",-1)]),512),[[i,l.value.maintenance.debug_mode]])])]),o("div",we,[o("button",{onClick:B,disabled:b.value,class:"btn btn-secondary"},w(b.value?"Creating Backup...":"Create System Backup"),9,ke),o("button",{onClick:D,disabled:f.value,class:"btn btn-warning"},w(f.value?"Clearing...":"Clear Cache"),9,Se),o("button",{onClick:E,class:"btn btn-info"}," View System Logs ")])])])]))])):(d(),u("div",W,[e[32]||(e[32]=o("h3",{class:"text-lg font-medium text-red-800 mb-2"},"Access Denied",-1)),e[33]||(e[33]=o("p",{class:"text-red-600"},"You do not have admin privileges to access system settings.",-1)),k(x,{to:"/",class:"inline-block mt-3 bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700"},{default:S(()=>e[31]||(e[31]=[U(" Go Home ",-1)])),_:1,__:[31]})])):(d(),u("div",O,[e[29]||(e[29]=o("h3",{class:"text-lg font-medium text-red-800 mb-2"},"Access Denied",-1)),e[30]||(e[30]=o("p",{class:"text-red-600"},"Please log in to access system settings.",-1)),k(x,{to:"/login",class:"inline-block mt-3 bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700"},{default:S(()=>e[28]||(e[28]=[U(" Go to Login ",-1)])),_:1,__:[28]})]))])])}}},_e=L(Ue,[["__scopeId","data-v-883077a2"]]);export{_e as default};
